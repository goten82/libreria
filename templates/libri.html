{% extends "form.html" %}

{% block content %}
<h1 class="mb-4">Gestione dei Libri</h1>

<form action="/api/add_libro" method="POST" class="mt-4">
    <div class="mb-3">
        <label for="titolo" class="form-label">Titolo</label>
        <input type="text" class="form-control" id="titolo" name="titolo" required>
    </div>
    <div class="mb-3">
        <label for="autore" class="form-label">Autore</label>
        <select class="form-control" id="autore" name="autore_id">
            <option value="" selected>Scegli un autore esistente</option>
            {% for author in autori %}
            <option value="{{ author.id }}">{{ author.nome }} {{author.cognome}}</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-3">
        <label for="new_author" class="form-label">O aggiungi un nuovo autore</label>
        <input type="text" class="form-control" id="new_author" name="nome" placeholder="Nome...">
        <input type="text" class="form-control" id="new_author" name="cognome" placeholder="Cognome...">
    </div>
    <div class="mb-3">
        <label for="casa_editrice" class="form-label">Casa editrice</label>
        <input type="text" class="form-control" id="casa_editrice" name="casa_editrice" required>
    </div>
    <div class="mb-3">
        <label for="isbn" class="form-label">ISBN</label>
        <input type="text" class="form-control" id="isbn" name="isbn" required>
    </div>
    <div class="mb-3">
        <label for="categoria" class="form-label">Categoria</label>
        <select class="form-select" id="categoria" name="categoria_id">
            <option value="">Scegli categoria esistente</option>
            {% for categoria in categorie %}
            <option value="{{ categoria.id }}" {% if categoria.id==categoria_id %}selected{% endif %}>{{
                categoria.categoria }}</option>
            {% endfor %}
        </select>
        <div class="mb-3">
            <label for="new_author" class="form-label">O aggiungi una nuova</label>
            <input type="text" class="form-control" id="new_categoria" name="categoria" placeholder="Categoria...">
        </div>
    </div>
    <div class="mb-3">
        <label for="posizione" class="form-label">Posizione</label>
        <input type="text" class="form-control" id="posizione" name="posizione">
    </div>

    <button type="submit" class="btn btn-primary">Inserisci</button>
    <a href="/api/libri" class="btn btn-secondary">Annulla</a>
</form>

{% endblock %}